{% extends 'base.html' %}
{% block content %}
<div class="min-h-screen bg-gradient-to-br from-blue-900 via-blue-700 to-cyan-500 relative overflow-hidden">
  
  <!-- Animated Background Elements -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob top-0 -left-4"></div>
    <div class="absolute w-96 h-96 bg-cyan-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000 top-0 -right-4"></div>
    <div class="absolute w-96 h-96 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000 bottom-0 left-1/2"></div>
  </div>

  <!-- Navbar -->
  <div class="relative z-20">
    {% include 'navbar.html' %}
  </div>

  <!-- Main Content -->
  <div class="relative mt-20 z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
    
    <!-- Hero Section with Glassmorphism -->
    <div class="bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-6 sm:p-8 mb-6 sm:mb-8 transition-all duration-300 hover:bg-white/15">
      <div class="text-center">
        
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-2">Bluekick Sports</h1>
        <p class="text-base sm:text-lg text-blue-100">Your Most Trusted Original Sports Wearable</p>
      </div>
    </div>

    <!-- Welcome Section -->
    <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-4 sm:p-6 mb-6 transition-all duration-300 hover:bg-white/15">
      <div class="text-center">
        <p class="text-xl sm:text-2xl text-white font-semibold mb-2">
          Welcome, <span class="text-cyan-300">{{user.username}}</span> üëã
        </p>
        <p class="text-xs sm:text-sm text-blue-100">
          Sesi terakhir login: <span class="font-semibold text-white">{{ last_login }}</span>
        </p>
      </div>
    </div>

    <!-- Filter Buttons -->
    <div class="flex justify-center gap-3 sm:gap-4 mb-6 sm:mb-8">
      <a href="?filter=all" class="flex-1 sm:flex-initial">
        <button type="button" class="w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 rounded-xl bg-white/10 backdrop-blur-md border border-white/30 text-white font-semibold hover:bg-white/20 hover:scale-105 transition-all duration-300 shadow-lg text-sm sm:text-base">
          <span class="flex items-center justify-center">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            All Products
          </span>
        </button>
      </a>
      <a href="?filter=my" class="flex-1 sm:flex-initial">
        <button type="button" class="w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 rounded-xl bg-white/10 backdrop-blur-md border border-white/30 text-white font-semibold hover:bg-white/20 hover:scale-105 transition-all duration-300 shadow-lg text-sm sm:text-base">
          <span class="flex items-center justify-center">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            My Products
          </span>
        </button>
      </a>
    </div>

    <!-- Products Section -->
    {% if not product_list %}
    <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-8 sm:p-12 text-center">
      <div class="inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-white/20 backdrop-blur-md border border-white/30 mb-4">
        <svg class="w-10 h-10 sm:w-12 sm:h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
        </svg>
      </div>
      <p class="text-white text-lg sm:text-xl font-semibold">Belum ada product pada {{app_name}}</p>
      <p class="text-blue-100 text-sm sm:text-base mt-2">Mulai tambahkan produk untuk membangun koleksi Anda!</p>
    </div>
    {% else %}
    
    <!-- Products Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8">
      {% for product in product_list %}
      <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-4 sm:p-6 transition-all duration-300 hover:bg-white/15 hover:shadow-2xl hover:shadow-blue-500/30 hover:scale-105 flex flex-col group">
        
        <!-- Product Image -->
        {% if product.thumbnail %}
        <div class="relative overflow-hidden rounded-xl mb-4">
          <img src="{{ product.thumbnail }}" alt="thumbnail" class="w-full h-40 sm:h-48 object-cover transition-transform duration-300 group-hover:scale-110"/>
          <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </div>
        {% else %}
        <div class="w-full h-40 sm:h-48 flex items-center justify-center bg-white/10 backdrop-blur-md rounded-xl mb-4 border border-white/20">
          <svg class="w-12 h-12 sm:w-16 sm:h-16 text-white/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
        </div>
        {% endif %}

        <!-- Product Info -->
        <h2 class="text-lg sm:text-xl font-bold text-white mb-2 hover:text-cyan-300 transition-colors line-clamp-2">
          <a href="{% url 'main:show_product' product.id %}">{{ product.name }}</a>
        </h2>

        <!-- Category & Badges -->
        <div class="flex flex-wrap gap-2 mb-3">
          <span class="px-2 sm:px-3 py-1 text-xs rounded-full bg-blue-500/30 backdrop-blur-md border border-blue-400/50 text-white font-semibold">
            {{ product.get_category_display }}
          </span>
          {% if product.is_featured %}
          <span class="px-2 sm:px-3 py-1 text-xs rounded-full bg-yellow-500/30 backdrop-blur-md border border-yellow-400/50 text-yellow-200 font-semibold">
            ‚≠ê Featured
          </span>
          {% endif %}
          {% if product.is_product_top %}
          <span class="px-2 sm:px-3 py-1 text-xs rounded-full bg-green-500/30 backdrop-blur-md border border-green-400/50 text-green-200 font-semibold">
            üèÜ Top Product
          </span>
          {% endif %}
        </div>

        <!-- Stock & Rating -->
        <div class="flex items-center gap-4 mb-3 text-xs sm:text-sm text-blue-100">
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
            </svg>
            Stock: {{ product.stock }}
          </span>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
            </svg>
            {{ product.rating }}
          </span>
        </div>

        <!-- Description -->
        <p class="text-blue-100 text-xs sm:text-sm mb-4 flex-grow line-clamp-3">
          {{ product.description|truncatewords:25 }}
        </p>

        <!-- Action Buttons -->
        {% if user.is_authenticated and product.user == user %}
        <div class="flex gap-2 sm:gap-3 mt-auto">
          <a href="{% url 'main:edit_product' product.pk %}" class="flex-1">
            <button class="w-full px-3 sm:px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white text-sm font-semibold rounded-lg shadow-lg hover:shadow-yellow-500/50 transition-all duration-300 hover:scale-105">
              <span class="flex items-center justify-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
                Edit
              </span>
            </button>
          </a>
          <a href="{% url 'main:delete_product' product.pk %}" class="flex-1">
            <button class="w-full px-3 sm:px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white text-sm font-semibold rounded-lg shadow-lg hover:shadow-red-500/50 transition-all duration-300 hover:scale-105">
              <span class="flex items-center justify-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
                Delete
              </span>
            </button>
          </a>
        </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Footer Spacing -->
    <div class="h-8"></div>
  </div>
</div>

<style>
  /* Custom animations for background blobs */
  @keyframes blob {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -50px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
  }
  
  .animate-blob {
    animation: blob 7s infinite;
  }
  
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  
  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
{% endblock content %}